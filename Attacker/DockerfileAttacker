FROM ubuntu:22.04

#Update package list and install required packages
RUN apt-get update && \
    apt-get install -y \
    curl \
    libpcap0.8 \
    python3 \
    pip \
    netcat \
    nmap \
    git \
    build-essential \
    libssl-dev \
    ftp \
    openssh-server

#Packetbeat installation
RUN curl -L -O https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.4.3-amd64.deb
RUN dpkg -i packetbeat-8.4.3-amd64.deb

#Filebeat installation
RUN curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.4.3-amd64.deb
RUN dpkg -i filebeat-8.4.3-amd64.deb

#install john 
RUN git clone https://github.com/openwall/john.git -b bleeding-jumbo ~/src/john

ADD id_rsa /home
ADD id_rsa.pub /home

RUN chmod 600 home/id_rsa
RUN chmod 600 home/id_rsa.pub

RUN pip install colorama
RUN pip install requests

ADD filebeat.yml /etc/filebeat/filebeat.yml
ADD packetbeat.yml /etc/packetbeat/packetbeat.yml
ADD Exploits /home

#change root password
RUN echo 'root:root' | chpasswd


CMD ["/bin/sh","-c","tail -f /dev/null"]
